{
  "hash": "ba5ac2f14d623d36b3e2788a29cba403",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Soil property mapping\"\nauthor: \"Alex Koiter\"\n---\n\n\n\n## Load libraries\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nsuppressPackageStartupMessages({\n  library(tidyverse)\n  library(terra)\n  library(patchwork)\n  library(sf)\n})\n```\n:::\n\n\n\n## Load data\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nag_data <- read_csv(here::here(\"./notebooks/ag_terrain_data.csv\"), show_col_types = FALSE) \n  # select(\"x\", \"y\", \"elevation\", \"ca\", \"mo\", \"u\", \"a_col\", \"h_col\", \"c_col\", \"organic\", \"ssa\")\n\nforest_data <- read_csv(here::here(\"./notebooks/forest_terrain_data.csv\"), show_col_types = FALSE) \n  # select(\"x\", \"y\", \"elevation\", \"li\", \"nb\", \"zn\", \"v_col\", \"l_col\")\n```\n:::\n\n\n\n## Map soil property\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nag_rast <- rast(ag_data)\ncrs(x = ag_rast, warn=FALSE) <- \"epsg:26914\"\n\ncoords <- read_csv(here::here(\"./notebooks/coords.csv\"), show_col_types = FALSE) %>% \n  st_as_sf(coords = c(\"long\", \"lat\"),  crs = 4326) %>%\n  st_transform(crs = 26914)\n\ntheme_right <-  theme(axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        legend.position = \"right\",\n        legend.box.spacing = unit(0, \"pt\"),\n        legend.margin=margin(0,0,0,3),\n        legend.justification=\"left\",\n        legend.title = element_text(hjust = 0))\ntheme_left <-  theme(axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        legend.position = \"left\",\n        legend.text.position = \"left\",\n        legend.box.spacing = unit(0, \"pt\"),\n        legend.margin=margin(0,3,0,0),\n        legend.justification=\"right\",\n        legend.title = element_text(hjust = 1))\n\na_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = a_col)) +\n  scale_fill_viridis_c(name = bquote(italic(\"a*\")), breaks = seq(2.5, 4, 0.5)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_void(base_size = 12) +\n  theme_left +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nc_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = c_col)) +\n  scale_fill_viridis_c(name = bquote(italic(\"c*\")), breaks = seq(7, 11, 1)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_void(base_size = 12) + \n  theme_left +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\nh_col <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = h_col)) +\n  scale_fill_viridis_c(name = bquote(italic(\"h*\")), breaks = seq(1.15, 1.25, 0.02)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_void(base_size = 12) +\n  theme_left +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nca <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = ca)) +\n  scale_fill_viridis_c(name = \"Ca\", limits = c(1, 9.2), breaks = seq(1, 9, 2)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_void(base_size = 12) +\n  theme_right +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nmo <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = mo)) +\n  scale_fill_viridis_c(name = \"Mo\", breaks = seq(0.5, 2, 0.5)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_void(base_size = 12) +\n  theme_right +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) \n\nu <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = u)) +\n  scale_fill_viridis_c(name = \"U\", breaks = seq(1.2, 1.8, 0.2)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_void(base_size = 12) +\n  theme_right +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0))\n\ndem <- ggplot() +\n  tidyterra::geom_spatraster(data = ag_rast, aes(fill = elevation)) +\n  scale_fill_viridis_c(name = \"Elevation (m)\", option = \"inferno\", limits = c(309, 312)) +\n  #geom_sf(data = filter(coords, site == \"Agriculture\")) +\n  theme_void(base_size = 12) +\n  theme(axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        legend.position = \"bottom\") +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) +\n  ggspatial::annotation_scale(location = \"bl\") +\n  ggspatial::annotation_north_arrow(location = \"br\")\n```\n:::\n\n::: {.cell tbl-cap='Kriged map of select colour (*a\\**, *c\\**, *h\\**) and geochemical (Ca, Mo, U) properties across the agricultural site.'}\n\n```{.r .cell-code .hidden}\n#| fig-width: 12\n#| fig-asp: 0.6\n#| label: Fig-ag_map\n#| tbl-cap: Kriged map of select colour (*a\\**, *c\\**, *h\\**) and geochemical (Ca, Mo, U) properties across the agricultural site.\n\na_col + ca + c_col + mo + h_col + u + \n  plot_layout(ncol = 2) \n```\n\n::: {.cell-output-display}\n![](Soil_colour_maps_files/figure-html/Fig-ag_map-1.png){width=1152}\n:::\n:::\n",
    "supporting": [
      "Soil_colour_maps_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}